{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kalel\\\\Desktop\\\\cero\\\\proyecto_02\\\\frontend\\\\src\\\\pages\\\\turnos\\\\DetalleTurno.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useParams, useNavigate } from 'react-router-dom';\nimport TurnoDetalle from '../../components/turnos/TurnoDetalle';\nimport { obtenerTurno, eliminarTurno, cambiarEstadoTurno } from '../../api/turnosApi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DetalleTurno() {\n  _s();\n  var _location$state;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [turno, setTurno] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const viewOnly = Boolean(location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.viewOnly);\n  useEffect(() => {\n    fetch();\n  }, [id]);\n  async function fetch() {\n    setLoading(true);\n    try {\n      const r = await obtenerTurno(id);\n      if (r && r.success) setTurno(r.data);else {\n        alert((r === null || r === void 0 ? void 0 : r.error) || 'Error al obtener turno');\n        navigate('/turnos');\n      }\n    } catch (e) {\n      alert(e.message || String(e));\n      navigate('/turnos');\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function handleEliminar(id_turno) {\n    const r = await eliminarTurno(id_turno);\n    if (r && r.success) {\n      alert('Turno cancelado');\n      navigate('/turnos');\n    } else {\n      alert((r === null || r === void 0 ? void 0 : r.error) || 'Error al cancelar turno');\n    }\n  }\n  function handleEditar(id_turno) {\n    navigate(`/turnos/${id_turno}/editar`);\n  }\n  async function handleCambiarEstado(id_turno, id_estado) {\n    if (!id_estado) return;\n    try {\n      const r = await cambiarEstadoTurno(id_turno, parseInt(id_estado, 10));\n      if (r && r.success) {\n        await fetch();\n      } else {\n        alert((r === null || r === void 0 ? void 0 : r.error) || 'Error al cambiar estado');\n      }\n    } catch (e) {\n      alert(e.message || String(e));\n    }\n  }\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        children: \"Cargando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 76\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 54\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container page-padding\",\n    children: /*#__PURE__*/_jsxDEV(TurnoDetalle, {\n      turno: turno,\n      readOnly: viewOnly,\n      onClose: () => navigate('/turnos'),\n      onEditar: handleEditar,\n      onEliminar: handleEliminar,\n      onCambiarEstado: handleCambiarEstado\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(DetalleTurno, \"IHZw99XZH4ormH0ptN9JfcbfUsU=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = DetalleTurno;\nvar _c;\n$RefreshReg$(_c, \"DetalleTurno\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useParams","useNavigate","TurnoDetalle","obtenerTurno","eliminarTurno","cambiarEstadoTurno","jsxDEV","_jsxDEV","DetalleTurno","_s","_location$state","id","navigate","location","turno","setTurno","loading","setLoading","viewOnly","Boolean","state","fetch","r","success","data","alert","error","e","message","String","handleEliminar","id_turno","handleEditar","handleCambiarEstado","id_estado","parseInt","className","children","fileName","_jsxFileName","lineNumber","columnNumber","readOnly","onClose","onEditar","onEliminar","onCambiarEstado","_c","$RefreshReg$"],"sources":["C:/Users/Kalel/Desktop/cero/proyecto_02/frontend/src/pages/turnos/DetalleTurno.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useParams, useNavigate } from 'react-router-dom';\nimport TurnoDetalle from '../../components/turnos/TurnoDetalle';\nimport { obtenerTurno, eliminarTurno, cambiarEstadoTurno } from '../../api/turnosApi';\n\nexport default function DetalleTurno() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [turno, setTurno] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const viewOnly = Boolean(location?.state?.viewOnly);\n\n  useEffect(() => { fetch(); }, [id]);\n\n  async function fetch() {\n    setLoading(true);\n    try {\n      const r = await obtenerTurno(id);\n      if (r && r.success) setTurno(r.data);\n      else { alert(r?.error || 'Error al obtener turno'); navigate('/turnos'); }\n    } catch (e) {\n      alert(e.message || String(e));\n      navigate('/turnos');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleEliminar(id_turno) {\n    const r = await eliminarTurno(id_turno);\n    if (r && r.success) {\n      alert('Turno cancelado');\n      navigate('/turnos');\n    } else {\n      alert(r?.error || 'Error al cancelar turno');\n    }\n  }\n\n  function handleEditar(id_turno) {\n    navigate(`/turnos/${id_turno}/editar`);\n  }\n\n  async function handleCambiarEstado(id_turno, id_estado) {\n    \n    if (!id_estado) return;\n    try {\n      const r = await cambiarEstadoTurno(id_turno, parseInt(id_estado, 10));\n      if (r && r.success) {\n        await fetch();\n      } else {\n        alert(r?.error || 'Error al cambiar estado');\n      }\n    } catch (e) {\n      alert(e.message || String(e));\n    }\n  }\n\n  if (loading) return <div className=\"app-container\"><div className=\"card\"><p className=\"muted\">Cargando...</p></div></div>;\n\n  return (\n    <div className=\"app-container page-padding\">\n      <TurnoDetalle\n        turno={turno}\n        readOnly={viewOnly}\n        onClose={() => navigate('/turnos')}\n        onEditar={handleEditar}\n        onEliminar={handleEliminar}\n        onCambiarEstado={handleCambiarEstado}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}