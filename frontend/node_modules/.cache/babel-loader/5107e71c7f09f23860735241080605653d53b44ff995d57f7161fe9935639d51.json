{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kalel\\\\Desktop\\\\cero\\\\proyecto_02\\\\frontend\\\\src\\\\pages\\\\turnos\\\\DetalleTurno.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { useLocation, useParams, useNavigate } from 'react-router-dom';\nimport TurnoDetalle from '../../components/turnos/TurnoDetalle';\nimport { obtenerTurno, eliminarTurno, cambiarEstadoTurno } from '../../api/turnosApi';\nimport style from './DetalleTurno.module.css'; // CSS Modules opcional\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DetalleTurno() {\n  _s();\n  var _location$state;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [turno, setTurno] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const viewOnly = Boolean(location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.viewOnly);\n\n  // fetch memoizado con useCallback\n  const fetch = useCallback(async () => {\n    setLoading(true);\n    try {\n      const r = await obtenerTurno(id);\n      if (r && r.success) setTurno(r.data);else {\n        alert((r === null || r === void 0 ? void 0 : r.error) || 'Error al obtener turno');\n        navigate('/turnos');\n      }\n    } catch (e) {\n      alert(e.message || String(e));\n      navigate('/turnos');\n    } finally {\n      setLoading(false);\n    }\n  }, [id, navigate]);\n  useEffect(() => {\n    fetch();\n  }, [fetch]); // ✅ fetch está en el array de dependencias\n\n  async function handleEliminar(id_turno) {\n    const r = await eliminarTurno(id_turno);\n    if (r && r.success) {\n      alert('Turno cancelado');\n      navigate('/turnos');\n    } else {\n      alert((r === null || r === void 0 ? void 0 : r.error) || 'Error al cancelar turno');\n    }\n  }\n  function handleEditar(id_turno) {\n    navigate(`/turnos/${id_turno}/editar`);\n  }\n  async function handleCambiarEstado(id_turno, id_estado) {\n    if (!id_estado) return;\n    try {\n      const r = await cambiarEstadoTurno(id_turno, parseInt(id_estado, 10));\n      if (r && r.success) await fetch();else alert((r === null || r === void 0 ? void 0 : r.error) || 'Error al cambiar estado');\n    } catch (e) {\n      alert(e.message || String(e));\n    }\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.appContainer,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.card,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: style.muted,\n          children: \"Cargando...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${style.appContainer} ${style.pagePadding}`,\n    children: /*#__PURE__*/_jsxDEV(TurnoDetalle, {\n      turno: turno,\n      readOnly: viewOnly,\n      onClose: () => navigate('/turnos'),\n      onEditar: handleEditar,\n      onEliminar: handleEliminar,\n      onCambiarEstado: handleCambiarEstado\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(DetalleTurno, \"MyiTv4ty72mAr+KLohUNOQWTYds=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = DetalleTurno;\nvar _c;\n$RefreshReg$(_c, \"DetalleTurno\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useLocation","useParams","useNavigate","TurnoDetalle","obtenerTurno","eliminarTurno","cambiarEstadoTurno","style","jsxDEV","_jsxDEV","DetalleTurno","_s","_location$state","id","navigate","location","turno","setTurno","loading","setLoading","viewOnly","Boolean","state","fetch","r","success","data","alert","error","e","message","String","handleEliminar","id_turno","handleEditar","handleCambiarEstado","id_estado","parseInt","className","appContainer","children","card","muted","fileName","_jsxFileName","lineNumber","columnNumber","pagePadding","readOnly","onClose","onEditar","onEliminar","onCambiarEstado","_c","$RefreshReg$"],"sources":["C:/Users/Kalel/Desktop/cero/proyecto_02/frontend/src/pages/turnos/DetalleTurno.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { useLocation, useParams, useNavigate } from 'react-router-dom';\nimport TurnoDetalle from '../../components/turnos/TurnoDetalle';\nimport { obtenerTurno, eliminarTurno, cambiarEstadoTurno } from '../../api/turnosApi';\nimport style from './DetalleTurno.module.css'; // CSS Modules opcional\n\nexport default function DetalleTurno() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [turno, setTurno] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const viewOnly = Boolean(location?.state?.viewOnly);\n\n  // fetch memoizado con useCallback\n  const fetch = useCallback(async () => {\n    setLoading(true);\n    try {\n      const r = await obtenerTurno(id);\n      if (r && r.success) setTurno(r.data);\n      else {\n        alert(r?.error || 'Error al obtener turno');\n        navigate('/turnos');\n      }\n    } catch (e) {\n      alert(e.message || String(e));\n      navigate('/turnos');\n    } finally {\n      setLoading(false);\n    }\n  }, [id, navigate]);\n\n  useEffect(() => {\n    fetch();\n  }, [fetch]); // ✅ fetch está en el array de dependencias\n\n  async function handleEliminar(id_turno) {\n    const r = await eliminarTurno(id_turno);\n    if (r && r.success) {\n      alert('Turno cancelado');\n      navigate('/turnos');\n    } else {\n      alert(r?.error || 'Error al cancelar turno');\n    }\n  }\n\n  function handleEditar(id_turno) {\n    navigate(`/turnos/${id_turno}/editar`);\n  }\n\n  async function handleCambiarEstado(id_turno, id_estado) {\n    if (!id_estado) return;\n    try {\n      const r = await cambiarEstadoTurno(id_turno, parseInt(id_estado, 10));\n      if (r && r.success) await fetch();\n      else alert(r?.error || 'Error al cambiar estado');\n    } catch (e) {\n      alert(e.message || String(e));\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className={style.appContainer}>\n        <div className={style.card}>\n          <p className={style.muted}>Cargando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`${style.appContainer} ${style.pagePadding}`}>\n      <TurnoDetalle\n        turno={turno}\n        readOnly={viewOnly}\n        onClose={() => navigate('/turnos')}\n        onEditar={handleEditar}\n        onEliminar={handleEliminar}\n        onCambiarEstado={handleCambiarEstado}\n      />\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,WAAW,EAAEC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACtE,OAAOC,YAAY,MAAM,sCAAsC;AAC/D,SAASC,YAAY,EAAEC,aAAa,EAAEC,kBAAkB,QAAQ,qBAAqB;AACrF,OAAOC,KAAK,MAAM,2BAA2B,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE/C,eAAe,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,eAAA;EACrC,MAAM;IAAEC;EAAG,CAAC,GAAGZ,SAAS,CAAC,CAAC;EAC1B,MAAMa,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAC9B,MAAMa,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACoB,OAAO,EAAEC,UAAU,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EAE5C,MAAMsB,QAAQ,GAAGC,OAAO,CAACN,QAAQ,aAARA,QAAQ,wBAAAH,eAAA,GAARG,QAAQ,CAAEO,KAAK,cAAAV,eAAA,uBAAfA,eAAA,CAAiBQ,QAAQ,CAAC;;EAEnD;EACA,MAAMG,KAAK,GAAGxB,WAAW,CAAC,YAAY;IACpCoB,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMK,CAAC,GAAG,MAAMpB,YAAY,CAACS,EAAE,CAAC;MAChC,IAAIW,CAAC,IAAIA,CAAC,CAACC,OAAO,EAAER,QAAQ,CAACO,CAAC,CAACE,IAAI,CAAC,CAAC,KAChC;QACHC,KAAK,CAAC,CAAAH,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEI,KAAK,KAAI,wBAAwB,CAAC;QAC3Cd,QAAQ,CAAC,SAAS,CAAC;MACrB;IACF,CAAC,CAAC,OAAOe,CAAC,EAAE;MACVF,KAAK,CAACE,CAAC,CAACC,OAAO,IAAIC,MAAM,CAACF,CAAC,CAAC,CAAC;MAC7Bf,QAAQ,CAAC,SAAS,CAAC;IACrB,CAAC,SAAS;MACRK,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,CAACN,EAAE,EAAEC,QAAQ,CAAC,CAAC;EAElBjB,SAAS,CAAC,MAAM;IACd0B,KAAK,CAAC,CAAC;EACT,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC,CAAC,CAAC;;EAEb,eAAeS,cAAcA,CAACC,QAAQ,EAAE;IACtC,MAAMT,CAAC,GAAG,MAAMnB,aAAa,CAAC4B,QAAQ,CAAC;IACvC,IAAIT,CAAC,IAAIA,CAAC,CAACC,OAAO,EAAE;MAClBE,KAAK,CAAC,iBAAiB,CAAC;MACxBb,QAAQ,CAAC,SAAS,CAAC;IACrB,CAAC,MAAM;MACLa,KAAK,CAAC,CAAAH,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEI,KAAK,KAAI,yBAAyB,CAAC;IAC9C;EACF;EAEA,SAASM,YAAYA,CAACD,QAAQ,EAAE;IAC9BnB,QAAQ,CAAC,WAAWmB,QAAQ,SAAS,CAAC;EACxC;EAEA,eAAeE,mBAAmBA,CAACF,QAAQ,EAAEG,SAAS,EAAE;IACtD,IAAI,CAACA,SAAS,EAAE;IAChB,IAAI;MACF,MAAMZ,CAAC,GAAG,MAAMlB,kBAAkB,CAAC2B,QAAQ,EAAEI,QAAQ,CAACD,SAAS,EAAE,EAAE,CAAC,CAAC;MACrE,IAAIZ,CAAC,IAAIA,CAAC,CAACC,OAAO,EAAE,MAAMF,KAAK,CAAC,CAAC,CAAC,KAC7BI,KAAK,CAAC,CAAAH,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEI,KAAK,KAAI,yBAAyB,CAAC;IACnD,CAAC,CAAC,OAAOC,CAAC,EAAE;MACVF,KAAK,CAACE,CAAC,CAACC,OAAO,IAAIC,MAAM,CAACF,CAAC,CAAC,CAAC;IAC/B;EACF;EAEA,IAAIX,OAAO,EAAE;IACX,oBACET,OAAA;MAAK6B,SAAS,EAAE/B,KAAK,CAACgC,YAAa;MAAAC,QAAA,eACjC/B,OAAA;QAAK6B,SAAS,EAAE/B,KAAK,CAACkC,IAAK;QAAAD,QAAA,eACzB/B,OAAA;UAAG6B,SAAS,EAAE/B,KAAK,CAACmC,KAAM;UAAAF,QAAA,EAAC;QAAW;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,oBACErC,OAAA;IAAK6B,SAAS,EAAE,GAAG/B,KAAK,CAACgC,YAAY,IAAIhC,KAAK,CAACwC,WAAW,EAAG;IAAAP,QAAA,eAC3D/B,OAAA,CAACN,YAAY;MACXa,KAAK,EAAEA,KAAM;MACbgC,QAAQ,EAAE5B,QAAS;MACnB6B,OAAO,EAAEA,CAAA,KAAMnC,QAAQ,CAAC,SAAS,CAAE;MACnCoC,QAAQ,EAAEhB,YAAa;MACvBiB,UAAU,EAAEnB,cAAe;MAC3BoB,eAAe,EAAEjB;IAAoB;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAACnC,EAAA,CA9EuBD,YAAY;EAAA,QACnBT,SAAS,EACPC,WAAW,EACXF,WAAW;AAAA;AAAAqD,EAAA,GAHN3C,YAAY;AAAA,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}