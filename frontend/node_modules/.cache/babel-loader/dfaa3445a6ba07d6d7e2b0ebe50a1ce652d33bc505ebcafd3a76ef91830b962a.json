{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kalel\\\\Desktop\\\\cero\\\\proyecto_02\\\\frontend\\\\src\\\\pages\\\\cajas\\\\listaCajas.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { listCajas, aperturaCaja } from '../../api/cajasApi';\nimport CajaTable from '../../components/cajas/cajaTable';\nimport AperturaForm from '../../components/cajas/AperturaForm';\nimport { useNavigate } from 'react-router-dom';\nimport style from './ListaCajas.module.css'; // CSS Modules\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ListaCajas() {\n  _s();\n  const [cajas, setCajas] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  async function fetchCajas() {\n    setLoading(true);\n    try {\n      const resp = await listCajas();\n      if (resp && resp.success) {\n        setCajas(resp.data || []);\n      }\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setLoading(false);\n    }\n  }\n  useEffect(() => {\n    fetchCajas();\n  }, []);\n  async function handleApertura(payload) {\n    try {\n      const resp = await aperturaCaja(payload);\n      if (resp && resp.success) {\n        // navegar al detalle de la nueva caja\n        navigate(`/cajas/${resp.data.id_caja}`);\n      } else {\n        alert((resp === null || resp === void 0 ? void 0 : resp.error) || (resp === null || resp === void 0 ? void 0 : resp.message) || 'Error al abrir caja');\n      }\n    } catch (e) {\n      console.error(e);\n      alert(e.message || 'Error al abrir caja');\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style.listaCajas,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Cajas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.aperturaForm,\n      children: /*#__PURE__*/_jsxDEV(AperturaForm, {\n        onSubmit: handleApertura\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 4\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.loading,\n      children: \"Cargando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(CajaTable, {\n      items: cajas,\n      onView: id => navigate(`/cajas/${id}`)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 3\n  }, this);\n}\n_s(ListaCajas, \"PZ68Tslj0s/Dy+DjeboOgkiIzl4=\", false, function () {\n  return [useNavigate];\n});\n_c = ListaCajas;\nvar _c;\n$RefreshReg$(_c, \"ListaCajas\");","map":{"version":3,"names":["React","useEffect","useState","listCajas","aperturaCaja","CajaTable","AperturaForm","useNavigate","style","jsxDEV","_jsxDEV","ListaCajas","_s","cajas","setCajas","loading","setLoading","navigate","fetchCajas","resp","success","data","e","console","error","handleApertura","payload","id_caja","alert","message","className","listaCajas","children","fileName","_jsxFileName","lineNumber","columnNumber","aperturaForm","onSubmit","items","onView","id","_c","$RefreshReg$"],"sources":["C:/Users/Kalel/Desktop/cero/proyecto_02/frontend/src/pages/cajas/listaCajas.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { listCajas, aperturaCaja } from '../../api/cajasApi';\nimport CajaTable from '../../components/cajas/cajaTable';\nimport AperturaForm from '../../components/cajas/AperturaForm';\nimport { useNavigate } from 'react-router-dom';\nimport style from './ListaCajas.module.css'; // CSS Modules\n\nexport default function ListaCajas() {\n\tconst [cajas, setCajas] = useState([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst navigate = useNavigate();\n\n\tasync function fetchCajas() {\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tconst resp = await listCajas();\n\t\t\tif (resp && resp.success) {\n\t\t\t\tsetCajas(resp.data || []);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tfetchCajas();\n\t}, []);\n\n\tasync function handleApertura(payload) {\n\t\ttry {\n\t\t\tconst resp = await aperturaCaja(payload);\n\t\t\tif (resp && resp.success) {\n\t\t\t\t// navegar al detalle de la nueva caja\n\t\t\t\tnavigate(`/cajas/${resp.data.id_caja}`);\n\t\t\t} else {\n\t\t\t\talert(resp?.error || resp?.message || 'Error al abrir caja');\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\talert(e.message || 'Error al abrir caja');\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={style.listaCajas}>\n\t\t\t<h2>Cajas</h2>\n\n\t\t\t<div className={style.aperturaForm}>\n\t\t\t\t<AperturaForm onSubmit={handleApertura} />\n\t\t\t</div>\n\n\t\t\t{loading ? (\n\t\t\t\t<div className={style.loading}>Cargando...</div>\n\t\t\t) : (\n\t\t\t\t<CajaTable items={cajas} onView={(id) => navigate(`/cajas/${id}`)} />\n\t\t\t)}\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}